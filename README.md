# android-di

### 0.5 단계 : 생성자 주입 - 수동

- [x] Repository 클래스를 추상화하여 다음 문제점을 해결한다.
    - 테스트가 어렵다.
    - Repository 객체를 교체하기 위해서는 ViewModel에 직접적인 변경사항이 발생한다.


### 1 단계 : 생성자 주입 - 자동

다음 문제점들을 해결한다.

- [x] ViewModel에서 참조하는 Repository가 정상적으로 주입되지 않는다.
- [x] Repository를 참조하는 다른 객체가 생기면 주입 코드를 매번 만들어줘야 한다.
  - ViewModel에 수동으로 주입되고 있는 의존성들을 자동으로 주입되도록 한다.
  - 특정 ViewModel에서만이 아닌, 범용적으로 활용될 수 있는 자동 주입 로직을 작성한다.
  - 하나의 자동 주입 로직을 재사용할 수 있어야 한다.
    - 100개의 ViewModel이 생긴다고 가정했을 때, 자동 주입 로직 100개가 생기는 것이 아니다.
- [x] 장바구니에 접근할 때마다 매번 CartRepository 인스턴스를 새로 만들고 있다.
  - 여러 번 인스턴스화할 필요 없는 객체는 최초 한 번만 인스턴스화한다. 


### 2 단계
- [x] ViewModel 내 필드 주입을 구현한다.
- [x] 의존성 주입이 필요한 필드와 그렇지 않은 필드를 구분할 수 있도록 한다.
  - `Annotation`을 붙여서 필요한 요소에만 의존성을 주입한다.
- [x] 내가 만든 의존성 라이브러리에 대한 테스트를 작성한다.
- [x] `CartRepository`가 `CartProductDao` 객체를 참조하도록 변경한다.
- [x] `View` 에서 날짜 정보를 확인할 수 있도록 설정한다.


### 3 단계
- [x] 하나의 인터페이스의 여러 구현체가 DI 컨테이너에 등록된 경우, 상황에 따라 개발자가 Room DB 의존성을 주입받을지, In-Memory 의존성을 주입받을지 선택할 수 있다.
- [x] 내가 만든 DI 라이브러리를 모듈로 분리한다.

### 4 단계
- [x] `CartActivity`에서 사용하는 `DateFormatter` 의 인스턴스를 매번 개발자가 관리하지 않아도 되도록 수정한다.
- [x] 각 의존성이 적절한 생명주기에 따라 관리되어야 한다.
  - CartRepository는 앱 전체 LifeCycle 동안 유지되도록 구현한다.
  - ProductRepository는 ViewModel LifeCycle 동안 유지되도록 구현한다.
  - DateFormatter는 Activity LifeCycle 동안 유지되도록 구현한다.
- [x] 내가 만든 DI 라이브러리가 잘 작동하는지 테스트한다.
